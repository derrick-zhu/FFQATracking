<!DOCTYPE html>

<html>

<head>
    <title>首页 - 用户列表页面</title>
    <link rel="shortcut icon" href="/static/img/favicon.png" />
    <link rel="stylesheet" href="/static/css/bootstrap.css" />
    <script type="text/javascript" src="/static/js/jquery-3.3.1.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container">

        <!-- <div style="margin-bottom:20px;display: flex;display: -webkit-flex; align-items: center">
            <label>上传图片：</label><input type="file" name="elemUpload" id="elemUpload"><button type="submit" class="btn btn-primary" conclick="onUploadFile()">添加</button>
        </div> -->

        <div class="col-5 f-l text text-r">背景图(必须):</div>
        <form id="fform" action="/upload" method="post" enctype="multipart/form-data">
            <input id="myfile" name="myfile" type="file" />
            <input type="submit" value="保存" />
        </form>

        <div class="img-file col-offset-5">
        </div>

        <!--创建text文件-->
        <div style="width:100%;height:50px;">
            <button onclick="createtxt()" class="btn btn-primary">创建text文件</button>
            <label id="txtname"></label>
        </div>
        <!--写入文件-->
        <div style="width:100%;height:300px;margin-top:20px;">
            <label>输入内容:</label>
            <textarea id="writeinfo" style="width:50%;height:200px;" class="form-control"></textarea>
            <button value="写入内容" onclick="txtwrite()" class="btn btn-primary" style="margin-top:20px;">写入内容</button>
        </div>

        <!--读取文件内容部分-->
        <div style="width:100%;height:300px;">
            <button value="读取内容" onclick="txtread()" class="btn btn-primary" style="margin-bottom:20px;">读取内容</button>
            <textarea id="readinfo" style="width:50%;height:200px;" class="form-control"></textarea>
        </div>

        <button onclick="deletetxt()" class="btn btn-primary">删除text文件</button>

    </div>

    <!--JS部分-->
    <script type="text/javascript">

        // $(function () {
        //     $('#uploadFile').click(function () {
        //         formData = new FormData($('#uploadForm')[0]);
        //         $.ajax({
        //             type: 'post',
        //             url: '/upload',
        //             data: formData,
        //             cache: false,
        //             processData: false,
        //             contentType: 'multipart/form-data; boundary=----WebKitFormBoundaryZpsWTsOiRHI0TBW7',
        //         }).success(function (result) {
        //             alert(result);
        //         }).error(function (result) {
        //             alert("上传错误");
        //         });
        //     });
        // });

        //创建text文件
        function createtxt() {
            $.ajax({
                type: 'post',
                url: '/upload/FileCreate',
                data: {},
                success: function (result) {
                    console.log('获取的数据')
                    console.log(result)
                    $("#txtname").html(result.data);
                }
            })

        }
        //写入文件的内容
        function txtwrite() {
            $.ajax({
                type: 'post',
                url: '/upload/FileWrite',
                data: {
                    "info": $("#writeinfo").val(),
                    "path": $("#txtname").html()
                },
                success: function (result) {
                    console.log('获取的数据')
                    console.log(result)
                    $("#showinfo").html(result.data);
                }
            })
        }
        //读取文件的内容
        function txtread() {
            $.ajax({
                type: 'post',
                url: '/upload/FileRead',
                data: {
                    "path": $("#txtname").html()
                },
                success: function (result) {
                    console.log('获取的数据')
                    console.log(result)
                    $("#readinfo").html(result.data);
                }
            })
        }

        //删除text文件
        function deletetxt() {
            $.ajax({
                type: 'post',
                url: '/upload/FileDelete',
                data: {
                    "path": $("#txtname").html()
                },
                success: function (result) {
                    console.log('获取的数据')
                    console.log(result)
                    if (result.data) {
                        $("#txtname").html('');
                        alert("删除成功");
                    } else {
                        alert("删除失败");
                    }
                }
            })

        }
    </script>
</body>

</html>